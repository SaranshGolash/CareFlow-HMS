<%- include('initials/header.ejs', { title: 'Settings' }) %>
<link rel="stylesheet" href="/styles/settings.css">
    <div class="settings-container">
        <div class="settings-card">
            <div class="card-body">
                <h3 class="card-title mb-4 text-primary"><i class="fas fa-user-cog me-2"></i> Profile Settings</h3>

                <form action="/settings/update" method="POST" class="row g-4">
                    <input type="hidden" name="user_id" value="<%= user.id %>">
                    
                    <div class="col-12">
                        <h5 class="section-title">Account Details</h5>
                    </div>
                    
                    <div class="col-md-6">
                        <label for="username" class="form-label">Username</label>
                        <input id="username" name="username" type="text" class="form-control" value="<%= user.username %>" required>
                    </div>

                    <div class="col-md-6">
                        <label for="email" class="form-label">Email</label>
                        <input id="email" name="email" type="email" class="form-control" value="<%= user.email %>" required>
                    </div>
                    
                    <div class="col-12 mt-4">
                        <h5 class="section-title">Insurance Details</h5>
                    </div>

                    <div class="col-md-6">
                        <label for="insurance_provider" class="form-label">Insurance Provider</label>
                        <input id="insurance_provider" name="insurance_provider" type="text" class="form-control" 
                               value="<%= user.insurance_provider || '' %>" placeholder="e.g., United Healthcare">
                    </div>

                    <div class="col-md-6">
                        <label for="policy_number" class="form-label">Policy / Member ID</label>
                        <input id="policy_number" name="policy_number" type="text" class="form-control" 
                               value="<%= user.policy_number || '' %>" placeholder="e.g., XZ123456789">
                    </div>
                    
                    <div class="col-12 text-end pt-3">
                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="fas fa-save me-2"></i> Save Profile
                        </button>
                    </div>
                </form>
                
                <hr class="my-5">

                <form action="/settings/password" method="POST" class="row g-4">
                    <input type="hidden" name="user_id" value="<%= user.id %>">
                    
                    <div class="col-12">
                        <h5 class="section-title">Change Password</h5>
                    </div>

                    <div class="col-12 verification-block p-3">
                        <label for="current_password" class="form-label text-danger">Current Password*</label>
                        <input id="current_password" name="current_password" type="password" class="form-control" required placeholder="Enter your current password">
                    </div>

                    <div class="col-md-6">
                        <label for="new_password" class="form-label">New Password (Optional)</label>
                        <input id="new_password" name="new_password" type="password" class="form-control" placeholder="Min. 6 characters">
                        <div class="form-text text-muted">Min 6 characters.</div>
                    </div>
                    
                    <div class="col-md-6">
                        <label for="confirm_new_password" class="form-label">Confirm New Password</label>
                        <input id="confirm_new_password" name="confirm_new_password" type="password" class="form-control" placeholder="Re-enter new password">
                    </div>
                    
                    <div class="col-12 text-end pt-3">
                        <button type="submit" class="btn btn-primary btn-lg">
                            <i class="fas fa-lock me-2"></i> Change Password
                        </button>
                    </div>
                </form>

            </div>
        </div>
    </div>
<%- include('initials/footer.ejs') %>