<%- include('initials/header.ejs', { title: 'CareFlow - Add Vitals' }) %>
<link rel="stylesheet" href="/styles/add_vitals.css">
    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card shadow-md">
                    <div class="card-body">
                        <h3 class="card-title mb-4 text-primary"><i class="fas fa-stethoscope me-2"></i> Manually Add Patient Vitals</h3>
                        <p class="text-muted">Inputting vitals as: <strong><%= admin_username %> (Admin)</strong></p>

                        <form action="/add-vitals" method="POST" class="row g-4">
                            
                            <div class="col-md-12">
                                <label for="patient_id" class="form-label">Patient Name<span class="required-asterisk">*</span>:</label>
                                <select id="patient_id" name="patient_id" class="form-select form-control" required>
                                    <option value="" disabled selected>Select Patient</option>
                                    <% patients.forEach(patient => { %>
                                        <option value="<%= patient.id %>"><%= patient.username %> (<%= patient.email %>)</option>
                                    <% }); %>
                                </select>
                            </div>

                            <div class="col-md-6">
                                <label for="reading_timestamp" class="form-label">Reading Time:</label>
                                <input id="reading_timestamp" name="reading_timestamp" type="datetime-local" class="form-control" 
                                       value="<%= new Date(Date.now() - (new Date().getTimezoneOffset() * 60000)).toISOString().substring(0, 16) %>">
                                <div class="form-text text-muted">Defaults to current time.</div>
                            </div>
                            
                            <div class="col-md-6">
                                <label for="heart_rate" class="form-label">Heart Rate (BPM):</label>
                                <input id="heart_rate" name="heart_rate" type="number" class="form-control" placeholder="e.g. 75">
                            </div>
                            
                            <div class="col-md-6">
                                <label for="temperature" class="form-label">Temperature (Â°C):</label>
                                <input id="temperature" name="temperature" type="number" step="0.01" class="form-control" placeholder="e.g. 36.6">
                            </div>

                            <div class="col-md-6">
                                <label for="spo2" class="form-label">Oxygen Saturation (SpO2 %):</label>
                                <input id="spo2" name="spo2" type="number" step="0.1" class="form-control" placeholder="e.g. 98.5">
                            </div>
                            
                            <div class="col-md-6">
                                <label for="glucose_level" class="form-label">Glucose Level:</label>
                                <input id="glucose_level" name="glucose_level" type="number" step="0.01" class="form-control" placeholder="e.g. 95.2">
                            </div>

                            <div class="col-md-6">
                                <label for="systolic_bp" class="form-label">Systolic BP (Top):</label>
                                <input id="systolic_bp" name="systolic_bp" type="number" class="form-control" placeholder="e.g. 120">
                            </div>
                            
                            <div class="col-md-6">
                                <label for="diastolic_bp" class="form-label">Diastolic BP (Bottom):</label>
                                <input id="diastolic_bp" name="diastolic_bp" type="number" class="form-control" placeholder="e.g. 80">
                            </div>

                            <div class="col-12 text-end pt-3">
                                <button type="submit" class="btn btn-primary btn-lg me-2">
                                    <i class="fas fa-chart-line me-2"></i> Save Vitals
                                </button>
                                <a href="/monitoring" class="btn btn-light btn-lg">
                                    <i class="fas fa-times me-2"></i> Cancel
                                </a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
<%- include('initials/footer.ejs') %>